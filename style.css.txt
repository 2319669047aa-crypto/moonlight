:root {
  --main-color: #007aff; 
  --theme-gradient: linear-gradient(135deg, #007aff, #00c6ff);
  --theme-shadow: 0 4px 12px rgba(0, 122, 255, 0.3);
  /* ğŸŸ¢ ç”Ÿç†æœŸï¼šæ¸©é¦¨è«å…°è¿ªæš–ç²‰è‰² */
  --period-color: #ff9a9e;
  --period-bg: #fff0f5; 
}
body { 
  margin: 0; 
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  background-attachment: fixed;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
  padding-bottom: 80px; 
}
header { background: white; padding: 15px; position: sticky; top: 0; border-bottom: 1px solid #e5e5e5; z-index: 100; }
.header-content { display: flex; justify-content: space-between; align-items: center; }
h2 { margin: 0; font-size: 17px; font-weight: 700; color: #333; cursor: pointer; letter-spacing: 0.5px;}
.theme-text { color: var(--main-color); transition: color 0.3s; }
.icon-btn-header { width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; color: #333; cursor: pointer; border-radius: 50%; transition: background 0.2s; }
.icon-btn-header:active { background: #f0f0f5; }
.content { padding: 15px; }
.page { display: none !important; }
.active-page { display: block !important; }

/* äº¤äº’å»é™¤ */
.gradient-btn:active, .outline-btn:active, .icon-btn-header:active {
  filter: none !important;
  transform: none !important;
  background: inherit; 
}

/* è¾“å…¥æ¡† */
input, textarea, select { 
  padding: 12px; border: 1px solid #f0f0f0; border-radius: 10px; font-size: 16px; background: #f9f9f9; 
  width: 100%; box-sizing: border-box; outline: none; transition: all 0.2s; margin-bottom: 0; 
}
input:focus { background: white; border-color: var(--main-color); box-shadow: 0 0 0 2px rgba(0,122,255,0.1); }
input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
#money-input { text-align: left; font-size: 16px; font-weight: normal; color: initial; }

.title-edit-wrapper { display: flex; align-items: center; justify-content: center; gap: 5px; }
.title-edit-wrapper input { font-size: 16px; font-weight: bold; border: 1px solid #ddd; border-radius: 5px; background: #fff; width: 120px; text-align: center; color: #333; padding: 2px 5px; outline: none; margin-bottom: 0;}
.title-save-btn { width: 24px; height: 24px; background: #4cd964; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

.input-group, .memo-input-box { 
  background: white; padding: 20px; border-radius: 16px; 
  display: flex; flex-direction: column; gap: 12px; margin-bottom: 20px; 
  box-shadow: 0 4px 20px -5px rgba(0,0,0,0.05); border: none;
}
.memo-toolbar { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #f0f0f0; padding-top: 10px; }
.camera-btn { font-size: 24px; color: #888; cursor: pointer; padding: 5px; }
.camera-btn:hover { color: var(--main-color); }
.image-preview-area { position: relative; margin-bottom: 10px; display: inline-block;}
#preview-img { max-width: 100px; max-height: 100px; border-radius: 8px; object-fit: cover; border: 1px solid #eee; }
.remove-img-btn { position: absolute; top: -8px; right: -8px; width: 20px; height: 20px; background: rgba(0,0,0,0.6); color: white; border-radius: 50%; text-align: center; line-height: 18px; font-size: 14px; cursor: pointer; }

/* åŠ¨æ€å¡ç‰‡ */
.memo-card { 
  background: #fff; padding: 15px; border-radius: 12px; margin-top: 15px; 
  box-shadow: 0 8px 24px rgba(0,0,0,0.05); 
  display: flex; flex-direction: column; gap: 8px; 
  background-size: cover; background-position: center; background-repeat: no-repeat;
  position: relative; overflow: hidden;
}
.memo-text { font-size: 16px; color: #333; line-height: 1.5; white-space: pre-wrap; z-index: 2; background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(2px); padding: 5px; border-radius: 6px; }
.memo-img-display { max-height: 250px; width: auto; max-width: 100%; border-radius: 8px; margin-top: 5px; object-fit: contain; display: block; z-index: 2; }
.memo-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 5px; z-index: 2; background: transparent; padding: 5px; }
.memo-date { font-size: 12px; color: #555; font-weight: 500; background: rgba(255, 255, 255, 0.75); backdrop-filter: blur(2px); padding: 4px 8px; border-radius: 6px; }
.memo-actions-wrapper { display: flex; gap: 15px; align-items: center; background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(4px); padding: 6px 12px; border-radius: 20px; }
.memo-action-btn { color: #333; font-size: 12px; cursor: pointer; display: flex; align-items: center; gap: 3px; font-weight: bold; padding: 5px; }
.memo-action-btn:hover { color: var(--main-color); }
.memo-action-btn.delete:hover { color: #ff3b30; }

/* åŠ¨æ€èƒŒæ™¯è°ƒæ•´å·¥å…·æ¡ */
.bg-adjust-tools {
  background: #f9f9f9; padding: 10px; border-radius: 8px; margin-bottom: 10px;
  display: flex; flex-direction: column; gap: 8px; z-index: 5;
}

.section-title { font-size: 13px; font-weight: bold; color: #8e8e93; margin-bottom: 8px; margin-left: 5px; letter-spacing: 1px; }
#todo-list { margin-top: 15px; display: flex; flex-direction: column; gap: 8px; }
.todo-item { display: flex; align-items: center; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f0f0f0; cursor: pointer; }
.todo-left { display: flex; align-items: center; gap: 10px; flex: 1; }
.check-circle { width: 20px; height: 20px; border: 2px solid #ddd; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex: none; }
.check-circle i { font-size: 10px; color: white; display: none; }
.todo-item.completed .check-circle { background: var(--theme-gradient); border-color: transparent; }
.todo-item.completed .check-circle i { display: block; }
.todo-item.completed .todo-text { color: #aaa; text-decoration: line-through; }
.todo-text { font-size: 16px; color: #333; }
.todo-del-btn { color: #eee; padding: 10px; font-size: 14px; }
.todo-item:hover .todo-del-btn { color: #ccc; }

.custom-input-row { display: flex; gap: 10px; }
.gradient-btn, .plus-btn { background: var(--theme-gradient); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; box-shadow: var(--theme-shadow); }
.gradient-btn { flex: 1; padding: 12px; font-size: 16px; }
.plus-btn { flex: none; width: 50px; display: flex; align-items: center; justify-content: center; font-size: 20px; }
.btn-row { display: flex; gap: 10px; }
.outline-btn { flex: 1; background: transparent; border: 2px solid var(--main-color); color: var(--main-color); padding: 12px; border-radius: 10px; font-size: 16px; font-weight: 600; cursor: pointer; }
.text-btn { background: transparent; color: #999; font-size: 13px; padding: 8px; font-weight: normal; border: none; width: 100%; margin-top: 5px; cursor: pointer;}
.tags-label { font-size: 12px; color: #999; margin-bottom: 5px; font-weight: 500;}
.tags-wrapper { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 10px; }
.tag-fixed { background: #f0f4f8; color: var(--main-color); border: 1px solid transparent; padding: 6px 12px; border-radius: 15px; font-size: 13px; cursor: pointer; }
.tag-custom { background: #f0f0f5; color: #333; border: 1px solid #e5e5ea; padding: 6px 12px; border-radius: 15px; font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 6px; }
.tag-del-icon { color: #ccc; font-weight: bold; font-size: 14px; padding: 0 5px; }
.tag-del-icon:hover { color: #ff3b30; }
.date-group { margin-bottom: 15px; }
.date-header { background-color: transparent; padding: 8px 10px; font-size: 14px; font-weight: bold; color: #555; display: flex; justify-content: space-between; align-items: center; cursor: pointer; user-select: none; border-left: 4px solid var(--main-color); }
.arrow-icon { transition: transform 0.3s; opacity: 0.6; }
.date-content { display: block; margin-top: 5px; }
.date-content.hidden { display: none; }
.bill-item { background: white; padding: 15px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; box-shadow: 0 2px 6px rgba(0,0,0,0.02); }
.bill-name { font-size: 16px; color: #333; font-weight: 500; }
.bill-right { display: flex; align-items: center; gap: 10px; }
.bill-money { font-size: 18px; color: var(--main-color); font-weight: bold; font-family: "Nunito", sans-serif;}
.delete-btn { color: #ff3b30; cursor: pointer; padding: 5px; font-size: 14px; opacity: 0.6; }
.bill-edit-btn { color: var(--main-color); cursor: pointer; padding: 5px; font-size: 14px; margin-right: 5px; opacity: 0.6; }

.bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 60px; background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #eaeaea; z-index: 150;}
.nav-item { display: flex; flex-direction: column; align-items: center; color: #ccc; font-size: 10px; cursor: pointer; transition: color 0.3s;}
.nav-item i { font-size: 24px; margin-bottom: 2px; }
.nav-item.active { color: var(--main-color); }
.modal { display: none !important; position: fixed; z-index: 200; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.4); backdrop-filter: blur(3px); justify-content: center; align-items: center; }
.modal-content { background-color: white; padding: 25px; border-radius: 20px; width: 92%; max-width: 380px; text-align: center; position: relative; max-height: 85vh; overflow-y: auto; box-shadow: 0 10px 30px rgba(0,0,0,0.15); }
.close-btn { position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; color: #ddd; z-index: 10; }
.report-tabs { display: flex; justify-content: center; margin-bottom: 15px; background: #f0f0f5; padding: 4px; border-radius: 10px; width: fit-content; margin-left: auto; margin-right: auto;}
.tab-btn { padding: 8px 16px; font-size: 14px; color: #666; cursor: pointer; border-radius: 8px; }
.active-tab { background: white; color: var(--main-color); font-weight: bold; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
#calendar-title { margin: 15px 0; color: #333; font-size: 18px; font-weight: bold; }
.week-header { display: grid; grid-template-columns: repeat(7, 1fr); margin-bottom: 10px; font-size: 13px; color: #999; font-weight: 500; }
.calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); row-gap: 15px; column-gap: 0px; width: 100%; }
.day-cell { display: flex; flex-direction: column; align-items: center; position: relative; min-height: 45px; }

/* æ—¥å†æ•°å­—é€šç”¨ */
.day-num { 
  font-size: 15px; 
  color: #333; 
  width: 30px; 
  height: 30px; 
  line-height: 30px; 
  text-align: center; 
  border-radius: 50%; 
  margin-bottom: 2px; 
}

/* ç…§ç‰‡æ—¥å†æ ¼å­ */
.photo-calendar .day-cell { height: 80px; justify-content: center; border-radius: 8px; overflow: hidden; margin-bottom: 0; }

.photo-calendar .day-num {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #fff;
  border-radius: 8px;
  background-repeat: no-repeat;
  background-position: center center;
  background-size: cover;          
}

/* ä»…æ–‡å­—æ ¼å­ -> ææ·¡ä¸»é¢˜è‰²èƒŒæ™¯ï¼Œæ·±è‰²ä¸»é¢˜å­—ï¼Œæ— è¾¹æ¡† */
.photo-calendar .day-num:not(.has-photo) {
  font-weight: bold;
  border: none;
  box-shadow: none;
}

/* æœ‰ç…§ç‰‡æ—¶ï¼Œæ–‡å­—æ˜¾ç¤ºä¸ºç™½è‰²å¸¦é˜´å½± */
.photo-calendar .day-num.has-photo {
  color: #fff !important;    
  text-shadow: 0 1px 3px rgba(0,0,0,0.8);
  font-weight: bold;
  border: none;                     
}

/* éšè—æ—¥æœŸå¼€å…³ - ä»…å¯¹æœ‰ç…§ç‰‡çš„æ ¼å­ç”Ÿæ•ˆ */
.photo-calendar.hide-date-text .day-num.has-photo {
  color: transparent !important;
  text-shadow: none !important;
}
/* çº¯æ–‡å­—æ ¼å­ï¼Œå³ä½¿å¼€äº†å¼€å…³ï¼Œä¹Ÿå¿…é¡»æ˜¾ç¤ºæ•°å­—ï¼Œå¦åˆ™çœ‹ä¸è§æ—¥æœŸ */
.photo-calendar.hide-date-text .day-num:not(.has-photo) {
  opacity: 1 !important;
}

/* ç”Ÿç†æœŸç‚¹å‡»äº¤äº’é«˜äº®è‰² (ç²‰è‰²åœ†åœˆ) */
.selected-temp {
  background-color: #ffc2c7 !important; 
  color: white !important;
  font-weight: bold;
  box-shadow: 0 0 0 2px #ff9a9e;
}

.current-day-circle { background: var(--theme-gradient); color: white !important; font-weight: bold; box-shadow: var(--theme-shadow); }
.day-total { font-size: 10px; color: var(--main-color); font-weight: 600; margin-top: -2px; }
.theme-control-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; font-size: 14px; color: #333; }
.color-wrapper input[type="color"] { width: 40px; height: 30px; border: none; padding: 0; cursor: pointer; background: transparent; }
.theme-preview-box { width: 100%; height: 60px; border-radius: 10px; background: var(--theme-gradient); display: flex; align-items: center; justify-content: center; box-shadow: var(--theme-shadow); transition: background 0.3s;}
.switch { position: relative; display: inline-block; width: 50px; height: 26px; }
.switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
.slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--main-color); }
input:checked + .slider:before { transform: translateX(24px); }
.date-range-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; gap: 5px; }
.date-range-row input { flex: 1; padding: 8px; font-size: 13px; border: 1px solid #ddd; border-radius: 8px; }
.settings-sub-title { margin:0 0 8px 0; font-size:14px; color:#333; font-weight:600; }
.toggle-group { background: #f0f0f5; padding: 3px; border-radius: 20px; display: flex; }
.toggle-btn { background: transparent; border: none; padding: 5px 12px; font-size: 12px; border-radius: 15px; color: #666; cursor: pointer; }
.toggle-btn.active { background: white; color: var(--main-color); box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-weight: bold; }
.tip-box { background: #f5f5f7; color: #666; font-size: 12px; padding: 10px; border-radius: 8px; margin-top: 10px; border: 1px solid #e5e5e5; line-height: 1.4; }
.help-icon:hover { opacity: 0.8; }
.password-item { background: white; border: 1px solid #eee; padding: 10px; border-radius: 8px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; }
.pass-info { flex: 1; text-align: left; }
.pass-title { font-weight: bold; font-size: 14px; color: #333; display: block; }
.pass-detail { font-size: 12px; color: #888; display: block; margin-top: 2px; }
.pass-sec-area { font-family: monospace; font-size: 14px; color: var(--main-color); cursor: pointer; background: #f5f5f7; padding: 2px 6px; border-radius: 4px; display: inline-block; margin-top: 4px; }
.pass-actions { display: flex; gap: 12px; align-items: center; }
.action-icon { font-size: 14px; color: #999; cursor: pointer; padding: 5px; transition: color 0.2s; }
.action-icon:hover { color: var(--main-color); }
.top-bar-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.view-toggle-bar { display: flex; gap: 10px; }
.toggle-pill { padding: 6px 16px; border-radius: 20px; border: none; background: #e5e5ea; color: #666; font-size: 13px; font-weight: 500; cursor: pointer; transition: all 0.2s; }
.toggle-pill.active { background: var(--theme-gradient); color: white; box-shadow: var(--theme-shadow); }

/* ğŸŸ¢ ä¿®å¤ï¼šæœç´¢æ¡†å’ŒæŒ‰é’®çš„å¸ƒå±€ (é˜²æ­¢é”™ä½) */
.filter-actions { display: flex; gap: 10px; align-items: center; }
.icon-btn-small { width: 32px; height: 32px; border-radius: 50%; border: 1px solid #eee; background: white; color: #666; display: flex; align-items: center; justify-content: center; cursor: pointer; flex: none; }

/* ğŸŸ¢ ä¿®å¤ï¼šè®¾ç½®é‡Œçš„å¤é€‰æ¡† (æ¨ªå‘æ’åˆ—) */
.checkbox-group { display: flex; gap: 20px; margin-bottom: 15px; justify-content: center; align-items: center; }
.checkbox-label { font-size: 14px; color: #555; display: flex; align-items: center; gap: 5px; cursor: pointer; margin-bottom: 0; }
.checkbox-label input { width: 16px; height: 16px; margin: 0; }

.filter-actions-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; gap: 10px; }
.search-box-wrapper { flex: 1; display: flex; align-items: center; background: white; border-radius: 20px; padding: 0 10px; height: 32px; border: 1px solid #eee; min-width: 0; }
.search-icon { color: #ccc; font-size: 12px; margin-right: 5px; }
#memo-search-input { border: none; background: transparent; padding: 0; font-size: 13px; width: 100%; height: 100%; }
#memo-search-input:focus { box-shadow: none; }
.calendar-header-row { display: flex; justify-content: center; align-items: center; gap: 30px; margin-bottom: 15px; position: relative; }
.period-calendar .day-cell { height: 45px; justify-content: center; cursor: pointer; }
.period-calendar .day-num { width: 35px; height: 35px; line-height: 35px; border-radius: 50%; transition: all 0.2s; position: relative; z-index: 1;}
.period-marker-single { border: 2px solid var(--period-color) !important; color: var(--period-color) !important; background: white; font-weight: bold; }
.period-marker-range { background-color: var(--period-bg); color: var(--period-color); border-radius: 0 !important; width: 100% !important; }
.period-marker-start { background-color: var(--period-color) !important; color: white !important; font-weight: bold; border-radius: 50% 0 0 50% !important; width: 100% !important; }
.period-marker-end { background-color: var(--period-color) !important; color: white !important; font-weight: bold; border-radius: 0 50% 50% 0 !important; width: 100% !important; }
.selected-for-period .day-num::after { content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0; border: 2px solid #333; border-radius: 50%; z-index: 10; pointer-events: none; }

/* ğŸŸ¢ ä¿®å¤ï¼šç”Ÿç†æœŸåŠ©æ‰‹ - æ¢å¤å†å²åˆ—è¡¨çš„ç¾åŒ–æ ·å¼ */
.period-item { background: white; border: 1px solid #eee; padding: 12px; border-radius: 10px; margin-bottom: 8px; display: flex; justify-content: space-between; align-items: center; transition: all 0.2s; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.02); }
.period-item:hover { background: #fff0f6; border-color: #fcc2d7; }
.period-item.editing { border: 2px solid #d63384; background: #fff0f6; }
.period-date-row { font-size: 14px; color: #333; font-weight: 500; }
.period-actions i { color: #ccc; padding: 5px; }
.period-actions i:hover { color: #d63384; }
.period-tag-single { background: #f8f9fa; color: #666; border: 1px solid #ddd; padding: 2px 8px; border-radius: 4px; font-size: 11px; display: inline-block; margin-left: 5px; }
.period-date-single { color: #d63384; font-weight: bold; }
.period-entry-btn { background: #fff0f6; color: #d63384; border: 1px solid #fcc2d7; padding: 6px 12px; border-radius: 20px; font-size: 12px; cursor: pointer; margin-left: 5px; }

/* 2. ä¿®å¤æœˆæ€»ç»“å›¾è¡¨å®¹å™¨ */
.chart-container-wrapper {
  position: relative;
  height: 300px; /* å¼ºåˆ¶é«˜åº¦ */
  width: 100%;
  margin-bottom: 20px;
}

/* 3. ä¼˜åŒ–æœˆæ€»ç»“æ—¥å†æ ¼å­æ˜¾ç¤º - æç®€é£æ ¼ */
#view-calendar .day-cell {
  background: transparent; /* å»æ‰èƒŒæ™¯è‰²å— */
  border: none;            /* å»æ‰è¾¹æ¡† */
  min-height: 50px;
  display: flex;
  flex-direction: column;
  align-items: center;     /* å†…å®¹å±…ä¸­ */
  justify-content: center;
  padding-top: 5px;
}

#view-calendar .day-num {
  font-size: 14px;
  color: #333;
  width: auto;
  height: auto;
  line-height: normal;
  margin-bottom: 2px;
  align-self: center;      /* æ•°å­—å±…ä¸­ */
  margin-left: 0;
  font-weight: normal;
}

#view-calendar .day-total {
  font-size: 11px;
  color: #666;             /* é»˜è®¤é¢œè‰²å˜æ·±ä¸€ç‚¹ */
  font-weight: bold;
  margin-top: 2px;
  align-self: center;
}

/* ä»Šå¤©çš„æ—¥æœŸåŠ ä¸€ä¸ªå°åœ†åœˆæ ‡è®° */
#view-calendar .day-cell.today .day-num {
  background: var(--main-color);
  color: white;
  width: 24px;
  height: 24px;
  line-height: 24px;
  text-align: center;
  border-radius: 50%;
}